"use strict";(self["webpackChunkclubflow"]=self["webpackChunkclubflow"]||[]).push([[680],{9680:function(e,n,o){o.r(n),o.d(n,{default:function(){return p}});var s=o(3396),t=o(7139),l=o(4870),c=o(7178),r=o(2655),a=o(2748),u={__name:"UpImage",props:{product_id:Number},emits:["upUrl"],setup(e,{emit:n}){const o=(0,l.qj)([]),u=(0,s.FN)()?.appContext.config.globalProperties.$Baseurl+"comment/image",i=(0,l.qj)({showBtnDealImg:!0,noneBtnImg:!1}),p=(0,l.iH)(0),m=e=>{console.log("上传前端校验",e);const n=e.size/1024/1024<2;e.type;if(!n)return c.z8.success({message:"上传图片不能超过2MB哦!"}),!1},g=(e,o)=>{console.log("handleSuccessres",e),console.log("handleSuccessfile",o),e?(c.z8.success({message:"上传成功!"}),n("upUrl",o.response.imgURL)):c.z8.error({message:"上传失败，请重新上传"})},f=(e,n)=>{console.log("file---",e),console.log("fileList---",n),i.noneBtnImg=n.length>=1},d=(e,n,o)=>{p.value=Math.floor(e.percent)},h=(e,n)=>{const o=new Promise(((o,s)=>{r.T.confirm("此操作将删除该图片, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{let o=n.indexOf(e);n.splice(o,1),i.noneBtnImg=!1})).catch((()=>{s(!1)}))}));return o};return(e,n)=>{const c=(0,s.up)("el-icon"),r=(0,s.up)("el-upload");return(0,s.wg)(),(0,s.j4)(r,{"list-type":"picture-card",action:u,class:(0,t.C_)({uoloadBtn:i.showBtnDealImg,disUoloadBtn:i.noneBtnImg}),"on-change":f,"on-success":g,"before-upload":m,"on-progress":d,"before-remove":h,"file-list":o,multiple:!0,limit:1},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{class:"avatar-uploader-icon"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(a.v37))])),_:1})])),_:1},8,["class","file-list"])}}};const i=u;var p=i}}]);
//# sourceMappingURL=680.25635782.js.map